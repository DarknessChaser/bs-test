<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Typescript测试</title>
</head>
<style id="my-style">
    :root {
        --global-color: #0f0f0f;
    }

    .output {
        color: var(--global-color);
    }
</style>
<body>
<button onclick="changeColor()">点我变色</button>
<input type="text" id="input" onchange="change(this)">
<span id="output" class="output"></span>
<hr>
<input type="text" id="input2" onchange="change2(this)">
<span id="output2" class="output"></span>

<script>
    var Scope = function () {
        this.$$watchers = [];
    };

    Scope.prototype.$watch = function () {

    };

    Scope.prototype.$digest = function () {

    };

</script>
<script src="js/test.js"></script>
<script>
    var obj = {}
    Object.defineProperty(obj, 'a', {
        get: function () {
            console.log('get val' + a);
            return a;
        },
        set: function (newVal) {
            console.log('set val:' + newVal);
            a = newVal;
            document.querySelector('#output').textContent = newVal;
        }
    })

    function change(_this) {
        obj.a = _this.value;
    }

    function randomRGBColor() {	//随机生成rgb颜色
        this.r = Math.floor(Math.random() * 255);
        this.g = Math.floor(Math.random() * 255);
        this.b = Math.floor(Math.random() * 255);
        this.color = 'rgb(' + this.r + ',' + this.g + ',' + this.b + ')';
        return this.color = 'rgb(' + this.r + ',' + this.g + ',' + this.b + ')';
    }

    var time;

    function changeColor() {
        if (time) {
            window.clearInterval(time)
            time = undefined
        } else {
            time = setInterval(function () {
                document.querySelector('#my-style').sheet.cssRules[0].style.cssText = '--global-color: ' + randomRGBColor() + ';'
            }, '100')
        }
    }
</script>
</body>
</html>
